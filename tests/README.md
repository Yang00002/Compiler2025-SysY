#### 编译评测脚本

```
g++ -g tests/test.cpp -o test
```

#### 使用评测脚本

注意为了节省空间，仓库不包含测试样例。

参数以 EBNF 范式表示，每行一个，顺序不能颠倒。
- (functional|arm|自定义测试目录)[/case.sy]  对应功能和性能测试样例集，附加路径可以评测某一样例
- [脚本名称.sh]  用于将测试用 .sy 文件构建成可以运行的 .out 文件的脚本，见 tests/compileTest.sh，它是默认的例子
- [disableReturn]  该选项禁止脚本在编译得到的输出后面自动附加返回值，默认会附加返回值

例如

```
./test functional
```

如果你不按照以上参数，而是只加一个 -r 参数，那脚本会刷新所有缓存。

评测脚本将先检查 build/lib 是否有对应 sylib.a sylib++.a 静态链接库(C 和 C++ 库)，如果没有会重新生成。

如果你想添加新的库，必须要按照 compileLib.sh 手动编译，因为检查库是否缺失是硬编码进脚本的。

随后它根据第一个参数，决定该选取哪一个测试样例。只给出目录，它将使用其中所有测试样例，它们以 .sy 结尾；否则使用指定的样例。

只有当样例合法，它才会进行测试，否则将跳过样例并给出警告。样例合法是指：
- 同一目录有对应的 .out 输出文件
- 如果同一目录还有对应的 .in 文件，它将将其作为输入，否则没有输入。如果程序要求输入而没有输入，脚本不能保证正常运行。
- 样例可以被以 C++ 编译成 .out 可执行程序，它将被存储在 build/example/样例路径 下。

你可以自己在 testcases 下定义新的目录，但请和 arm, functional 同级，请把目录添加进 .gitignore

当有样例后，脚本将调用指定的脚本(默认是 compileTest.sh)编译样例，作为你自己生成的代码进行测试。脚本应该存储在 tests 目录下，你不用也无法指定其目录。但所有代码都在项目根目录执行。

编译结果存储在 build/custom 目录下，和合法性检查时不一样，每次都会重新编译。注意，如果你使用默认脚本，还是放在 example 目录，并且除非编译好的文件删除不会重新编译。

随后脚本运行编译输出，得到的输出结果和 .out 比较。
如果指定脚本给输出后面附加返回值，它会将返回值加在输出后面，如果输出最后一个字符不是换行符，那它会起一行。

输出最后是否有换行符，使用哪种换行符，不影响评测结果。

如果一切正确，将会对指定样例显示 OK，否则显示编译错误，或输出不一致。

如果编译错误，会显示标准错误流 cerr 中内容，不会显示 cout，请不要输出到 cout。

如果输出不一致，会将相关的文件复制到 build/example_diff/测试样例 目录，该目录在每次评测都会删除，请不要将脚本生成的结果放到这里。